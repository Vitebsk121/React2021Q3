{"version":3,"file":"index.939a858d.js","sources":["../../vite/dynamic-import-polyfill","../../src/services/API/Api.ts","../../src/components/SearchForm/SearchForm.tsx","../../src/containers/Header/Header.tsx","../../src/components/NewsCard/NewsCard.tsx","../../src/containers/Main/Main.tsx","../../src/containers/App/App.tsx","../../src/main.tsx"],"sourcesContent":["const p = function polyfill(modulePath = '.', importFunctionName = '__import__') {\n    try {\n        self[importFunctionName] = new Function('u', `return import(u)`);\n    }\n    catch (error) {\n        const baseURL = new URL(modulePath, location);\n        const cleanup = (script) => {\n            URL.revokeObjectURL(script.src);\n            script.remove();\n        };\n        self[importFunctionName] = (url) => new Promise((resolve, reject) => {\n            const absURL = new URL(url, baseURL);\n            // If the module has already been imported, resolve immediately.\n            if (self[importFunctionName].moduleMap[absURL]) {\n                return resolve(self[importFunctionName].moduleMap[absURL]);\n            }\n            const moduleBlob = new Blob([\n                `import * as m from '${absURL}';`,\n                `${importFunctionName}.moduleMap['${absURL}']=m;`\n            ], { type: 'text/javascript' });\n            const script = Object.assign(document.createElement('script'), {\n                type: 'module',\n                src: URL.createObjectURL(moduleBlob),\n                onerror() {\n                    reject(new Error(`Failed to import: ${url}`));\n                    cleanup(script);\n                },\n                onload() {\n                    resolve(self[importFunctionName].moduleMap[absURL]);\n                    cleanup(script);\n                }\n            });\n            document.head.appendChild(script);\n        });\n        self[importFunctionName].moduleMap = {};\n    }\n};__VITE_IS_MODERN__&&p(\"assets/\");","import axios from 'axios';\n\nconst axiosInst = axios.create({\n  baseURL: 'https://newsapi.org/v2',\n  timeout: 5000,\n});\n\nexport default axiosInst;\n","import './SearchForm.scss';\n\nimport React from 'react';\n\nimport { IHeaderProps } from '../../shared/interfaces';\n\nexport default function SearchForm({ isLoading, onSubmit }: IHeaderProps) {\n  return (\n    <form className=\"SearchForm\" onSubmit={(e) => onSubmit(e)}>\n      <input name=\"search\" type=\"text\" placeholder=\"Search something...\" required />\n      <button type=\"submit\" disabled={isLoading}>\n        {isLoading ? 'Loading...' : 'Search'}\n      </button>\n    </form>\n  );\n}\n","import './Header.scss';\n\nimport React from 'react';\n\nimport SearchForm from '../../components/SearchForm/SearchForm';\nimport { IHeaderProps } from '../../shared/interfaces';\n\nexport default function Header({ isLoading, onSubmit }: IHeaderProps) {\n  return (\n    <div className=\"Header\">\n      <a href=\"/React2021Q3/react-api/\">\n        <h1>React API</h1>\n      </a>\n      <SearchForm isLoading={isLoading} onSubmit={onSubmit} />\n      <a href=\"https://newsapi.org/\" target=\"_blank\" rel=\"noreferrer\">\n        <b>News API</b>\n      </a>\n    </div>\n  );\n}\n","/* eslint-disable @typescript-eslint/indent */\nimport './NewsCard.scss';\n\nimport React from 'react';\n\nimport { INewsCard } from '../../shared/interfaces';\n\nexport default function NewsCard({\n  title,\n  author,\n  description,\n  publishedAt,\n  url,\n  source,\n  urlToImage,\n}: INewsCard) {\n  return (\n    <a className=\"NewsCard\" href={url} target=\"_blank\" rel=\"noreferrer\">\n      <div className=\"NewsCard__pic\" style={{ backgroundImage: `url(${urlToImage})` }} />\n      <div className=\"NewsCard__content\">\n        <h3>{title}</h3>\n        <p className=\"NewsCard__info date\">\n          {new Date(Date.parse(publishedAt)).toLocaleString('ru-RU', {\n            day: 'numeric',\n            month: 'long',\n            year: 'numeric',\n          })}\n          {' Ð² '}\n          {new Date(Date.parse(publishedAt)).toLocaleString('ru-RU', {\n            hour: 'numeric',\n            minute: 'numeric',\n          })}\n        </p>\n        <p className=\"NewsCard__info author\">{author}</p>\n        <p className=\"NewsCard__info source\">{source?.name}</p>\n        <p className=\"NewsCard__description\">{description}</p>\n      </div>\n    </a>\n  );\n}\n","/* eslint-disable prettier/prettier */\n/* eslint-disable @typescript-eslint/indent */\nimport './Main.scss';\n\nimport React from 'react';\n\nimport NewsCard from '../../components/NewsCard/NewsCard';\nimport { IMainProps } from '../../shared/interfaces';\n\nexport default function Main({\n  cards = [],\n  handleSort,\n  handleLangFilter,\n  currentPage,\n  countOfPages,\n  setPage,\n}: IMainProps) {\n  return (\n    <div className=\"Main\">\n      {cards.length > 0 ? (\n        <div className=\"sortBtnWrapper\">\n          <label htmlFor=\"language\">\n            Filter by language:\n            <select\n              id=\"language\"\n              onChange={(event) => {\n                handleLangFilter((event?.target as HTMLSelectElement).value);\n              }}\n            >\n              <option>ru</option>\n              <option>en</option>\n              <option>de</option>\n              <option>fr</option>\n              <option>it</option>\n            </select>\n          </label>\n          <label htmlFor=\"sortBy\">\n            Sort by:\n            <select\n              id=\"sortBy\"\n              onChange={(event) => {\n                handleSort((event?.target as HTMLSelectElement).value);\n              }}\n            >\n              <option>newest</option>\n              <option>popularity</option>\n              <option>relevancy</option>\n            </select>\n          </label>\n        </div>\n      ) : null}\n      <ul className=\"cardsField\">\n        {cards\n          ? cards.map((card) => {\n              const key = Math.random() * 10000;\n              const {\n                author,\n                content,\n                description,\n                publishedAt,\n                title,\n                url,\n                source,\n                urlToImage,\n              } = card;\n              return (\n                <li key={key}>\n                  <NewsCard\n                    author={author}\n                    content={content}\n                    description={description}\n                    publishedAt={publishedAt}\n                    title={title}\n                    url={url}\n                    key={key + Math.random() * 1000}\n                    urlToImage={urlToImage}\n                    source={source}\n                  />\n                </li>\n              );\n            })\n          : null}\n      </ul>\n      {cards.length > 0 ? (\n        <form className=\"page-info\" onSubmit={(event) => setPage(event)}>\n          Page\n          <input type=\"text\" defaultValue={currentPage} id=\"currentPage\" />\n          of\n          <span>{countOfPages}</span>\n          <button type=\"submit\">GO</button>\n        </form>\n      ) : null}\n    </div>\n  );\n}\n","import './App.scss';\n\nimport React from 'react';\n\nimport axiosInst from '../../services/API/Api';\nimport { IAppState, TSortType } from '../../shared/interfaces';\nimport Header from '../Header/Header';\nimport Main from '../Main/Main';\n\nconst apiKey = 'f3f422d21f5745108dc09bb5b9775aa3';\n\n// const apiKeyReserv = 'c01db5a20bb2479eba9962427e07a8c3';\n\nexport default class App extends React.Component<{}, IAppState> {\n  constructor(props: {} | Readonly<{}>) {\n    super(props);\n    this.state = {\n      isLoading: false,\n      newsCards: [],\n      langFilter: 'ru',\n      sortBy: 'publishedAt',\n      searchValue: '',\n      currentPage: 1,\n      countOfPages: 0,\n    };\n  }\n\n  // eslint-disable-next-line prettier/prettier\n  isLoadingHandle = () => this.setState((prevState) => ({ isLoading: !prevState.isLoading }));\n\n  handleApiData = async () => {\n    this.isLoadingHandle();\n    // eslint-disable-next-line prettier/prettier\n    const {\n      langFilter, sortBy, searchValue, currentPage,\n    } = this.state;\n    try {\n      const responce = await axiosInst.get(\n        `everything?q=${searchValue}&apiKey=${apiKey}&language=${langFilter}&sortBy=${sortBy}&page=${currentPage}&pageSize=9`,\n      );\n\n      const newsCards = await responce.data.articles;\n      const countOfPages: number = Math.ceil((await responce.data.totalResults) / 9);\n\n      this.setState({\n        countOfPages,\n        newsCards,\n      });\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.log(error);\n    } finally {\n      this.isLoadingHandle();\n    }\n  };\n\n  formSubmitHandle = async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n\n    const searchValue: string = (event.target as HTMLFormElement).search.value;\n\n    this.setState({\n      currentPage: await 1,\n      searchValue: await searchValue,\n    });\n\n    this.handleApiData();\n  };\n\n  handleLangFilter = async (langFilter: string) => {\n    this.setState({\n      langFilter: await langFilter,\n    });\n    this.handleApiData();\n  };\n\n  handleSort = async (sortBy: TSortType) => {\n    this.setState({\n      sortBy: await sortBy,\n    });\n    this.handleApiData();\n  };\n\n  handleCurrentPage = async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n\n    let currentPage: number = +(event.target as HTMLFormElement).currentPage.value;\n    const { countOfPages } = this.state;\n\n    if (countOfPages && currentPage > countOfPages) currentPage = countOfPages;\n\n    this.setState({\n      currentPage: await currentPage,\n    });\n    this.handleApiData();\n  };\n\n  render() {\n    // eslint-disable-next-line prettier/prettier\n    const {\n      isLoading, newsCards, currentPage, countOfPages,\n    } = this.state;\n\n    return (\n      <div className=\"App\">\n        <Header isLoading={isLoading} onSubmit={this.formSubmitHandle} />\n        <Main\n          cards={newsCards}\n          currentPage={currentPage}\n          countOfPages={countOfPages}\n          handleSort={this.handleSort}\n          handleLangFilter={this.handleLangFilter}\n          setPage={this.handleCurrentPage}\n        />\n      </div>\n    );\n  }\n}\n","import './index.scss';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './containers/App/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"names":["modulePath","importFunctionName","Function","error","baseURL","URL","location","cleanup","script","revokeObjectURL","src","remove","url","Promise","resolve","reject","absURL","self","moduleMap","moduleBlob","Blob","type","Object","assign","document","createElement","createObjectURL","[object Object]","Error","head","appendChild","p","axiosInst","axios","create","timeout","isLoading","onSubmit","className","e","name","placeholder","required","disabled","href","SearchForm","target","rel","title","author","description","publishedAt","source","urlToImage","style","backgroundImage","Date","parse","toLocaleString","day","month","year","hour","minute","cards","handleSort","handleLangFilter","currentPage","countOfPages","setPage","length","htmlFor","id","onChange","event","value","map","card","key","Math","random","content","NewsCard","defaultValue","React","Component","props","this","setState","prevState","async","isLoadingHandle","langFilter","sortBy","searchValue","state","responce","get","newsCards","data","articles","ceil","totalResults","log","preventDefault","search","handleApiData","Header","formSubmitHandle","Main","handleCurrentPage","ReactDOM","render","StrictMode","App","getElementById"],"mappings":"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"}